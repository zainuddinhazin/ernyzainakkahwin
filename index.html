<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- HTML Meta Tags -->
    <title>Raikan penyatuan dua hati, Erny & Zai.</title>
    <meta name="description" content="Dengan penuh kesyukuran, kami, Ruhaya binti Mohd Yaakub & keluarga menjemput Dato'/Datin/Tuan/Puan/Encik/Cik seisi keluarga hadir ke majlis perkahwinan puteri kami.">

    <!-- Facebook Meta Tags -->
    <meta property="og:url" content="https://ernyzainakkahwin.dpdns.org">
    <meta property="og:type" content="website">
    <meta property="og:title" content="Raikan penyatuan dua hati, Erny & Zai.">
    <meta property="og:description" content="Dengan penuh kesyukuran, kami, Ruhaya binti Mohd Yaakub & keluarga menjemput Dato'/Datin/Tuan/Puan/Encik/Cik seisi keluarga hadir ke majlis perkahwinan puteri kami.">
    <meta property="og:image" content="https://ernyzainakkahwin.dpdns.org/img/thumbnail.png">

    <!-- Twitter Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta property="twitter:domain" content="ernyzainakkahwin.dpdns.org">
    <meta property="twitter:url" content="https://ernyzainakkahwin.dpdns.org">
    <meta name="twitter:title" content="Raikan penyatuan dua hati, Erny & Zai.">
    <meta name="twitter:description" content="Dengan penuh kesyukuran, kami, Ruhaya binti Mohd Yaakub & keluarga menjemput Dato'/Datin/Tuan/Puan/Encik/Cik seisi keluarga hadir ke majlis perkahwinan puteri kami.">
    <meta name="twitter:image" content="https://ernyzainakkahwin.dpdns.org/img/thumbnail.png">

    <link rel="shortcut icon" type="image/x-icon" href="img/logo.png" />
    <title>Erny & Zai - Jemputan Kahwin</title>
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Josefin+Sans:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700&display=swap" rel="stylesheet">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <style type="text/tailwindcss">
		@theme {
			--font-josefin: 'Josefin Sans', sans-serif;

			--color-primary: #731c3c;
			--color-light: #f9f5f2;

			--animate-fade-bottom: fade-bottom 1s ease-in-out;
			--animate-growth: growth 0.5s ease-in-out;
			--animate-fall: fall 60s linear;

			@keyframes fade-bottom {
			0% { transform: translateY(50px); opacity: 0; }
			100% { transform: translateY(0); opacity: 1; }
			}

			@keyframes growth {
			0% { transform: scale(0); opacity: 0; }
			100% { transform: scale(1); opacity: 1; }
			}

			@keyframes fall {
			0% { transform: translateX(0) rotate(0deg); }
			100% { transform: translateX(var(--translate-x)) translateY(var(--translate-y)) rotate(720deg); }
			}
		}
	</style>
    
    <style>
        /* Font face for Brittany Signature */
        @font-face {
            font-family: 'Brittany Signature';
            src: url('fonts/BrittanySignature.woff2') format('woff2');
        }
        
        .font-brittany {
            font-family: 'Brittany Signature', cursive;
        }
        
        /* Custom scrollbar for messages */
        .custom-scrollbar::-webkit-scrollbar {
            width: 2px;
            background-color: #ADD8E6;
        }
        
        .custom-scrollbar::-webkit-scrollbar-thumb {
            box-shadow: inset 0 0 6px rgb(114, 243, 243);
            -webkit-box-shadow: inset 0 0 6px rgb(1, 66, 66);
            background-color: navy;
            border-radius: 12px;
        }
        
        /* Google Calendar icon gradient */
        .bxl-google {
            background: linear-gradient(to bottom left, transparent 49%, #fbbc05 50%) 0 25%/48% 40%,
                linear-gradient(to top left, transparent 49%, #fbbc05 50%) 0 75%/48% 40%,
                linear-gradient(-40deg, transparent 53%, #ea4335 54%),
                linear-gradient(45deg, transparent 46%, #4285f4 48%), #34a853;
            background-repeat: no-repeat;
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            -webkit-text-fill-color: transparent;
        }
    </style>
</head>
<body class="bg-light font-josefin text-gray-900 relative">
    <div id="loading" class="loading hidden fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-black bg-opacity-80 text-white p-5 rounded-lg z-50">Memuat data...</div>
    
    <!-- Wrapper Overlay -->
    <div id="wrapper" class="wrapper flex w-full h-screen items-center justify-center overflow-hidden bg-light transition-opacity duration-500">
        <div class="overlay w-[420px] h-full flex justify-center items-center shadow-2xl bg-cover bg-center bg-no-repeat" style="background-image: url('img/intro-bg.png');">
            <div class="overlay-content flex items-center justify-center w-full h-full text-center backdrop-blur-sm">
                <button id="toggle-content" class="toggle-button flex flex-col items-center justify-center bg-white shadow-2xl rounded-full w-36 h-36 text-2xl cursor-pointer border-none">
                    <p class="font-brittany text-3xl font-medium text-[#302b63] m-0 p-0">erny</p>
                    <p class="font-brittany text-3xl font-medium text-[#302b63] m-0 p-0">zai</p>
                    <p class="buka text-base font-josefin mt-5 uppercase">Buka</p>
                </button>
            </div>
        </div>
    </div>

    <!-- Main Card Content -->
    <div id="card" class="card hidden max-w-[420px] mx-auto shadow-2xl bg-white rounded-sm relative overflow-hidden">
        <div class="petal-container absolute w-full h-full top-0 left-0 z-0"></div>
        
        <!-- Intro Section -->
        <section class="intro bg-cover bg-center bg-no-repeat min-h-screen z-50 border-b border-gray-300" style="background-image: url('img/intro-bg.png'), linear-gradient(to right, #f9f5f2, #f9fcff, #f9f5f2);">
            <div class="content block py-48 text-center">
                <img src="img/bismillah.png" alt="" class="fade-top-1 w-3/4 h-auto mb-5 mx-auto">
                <p class="title fade-top-2 mt-2.5 mb-5 uppercase">raikan penyatuan dua hati</p>
                <h2 class="fade-top-3 font-brittany text-5xl font-normal mt-15">erny</h2>
                <h2 class="fade-top-3 font-brittany text-5xl font-normal mt-8">&</h2>
                <h2 class="fade-top-3 font-brittany text-5xl font-normal">zai</h2>
                <p class="date fade-top-4 mt-25">
                    <span>Khamis, 25 Disember 2025</span>
                </p>
            </div>
        </section>

        <!-- Event Info Section -->
        <section class="info flex flex-col items-center justify-center gap-2.5 py-12 bg-gradient-to-r from-[#f9f5f2] via-[#f9fcff] to-[#f9f5f2] min-h-screen">
            <img src="img/assalamualaikum.png" alt="" class="assalamualaikum reveal w-4/5 h-1/3 object-cover relative z-50">
            <div class="event-info reveal text-center relative z-50">
                <div class="one flex flex-col items-center justify-center gap-0.75">
                    <p>Dengan penuh kesyukuran</p>
                    <p>kami</p>
                    <div class="parent flex flex-col mt-5 mb-5 gap-1.25">
                        <p class="text-lg uppercase">Ruhaya binti Mohd Yaakub</p>
                        <p class="text-lg uppercase">& keluarga</p>
                    </div>
                    <p>Menjemput</p>
                    <p>Dato' | Datin | Tuan | Puan | Encik | Cik</p>
                    <p>seisi keluarga hadir ke</p>
                    <p>majlis perkahwinan puteri kami</p>
                </div>
                <div class="two flex flex-col mt-12 mb-12 gap-8.75">
                    <p class="font-brittany text-[#731c3c] text-2xl tracking-widest">Nur Ernyza Zabidi</p>
                    <p class="font-brittany text-[#731c3c] text-2xl tracking-widest">&</p>
                    <p class="font-brittany text-[#731c3c] text-2xl tracking-widest">Zainuddin Hazin</p>
                </div>
                <div class="three mb-3.75">
                    <p class="title uppercase mt-7.5 mb-2.5">Tempat</p>
                    <p class="desc text-lg">PINGGIRBALI Homestay & Campsite</p>
                    <p class="desc text-lg">Lot 3284 Jalan, Kuala Semerak, Tok Bali</p>
                    <p class="desc text-lg">16700 Pasir Puteh, Kelantan</p>
                </div>
                <div class="four mb-3.75">
                    <p class="title uppercase mt-7.5 mb-2.5">Tarikh</p>
                    <p class="desc text-lg">Khamis, 25 Disember 2025</p>
                    <p class="desc text-lg">Bersamaan 05 Rejab 1447H</p>
                </div>
                <div class="five">
                    <p class="title uppercase mt-7.5 mb-2.5">Masa</p>
                    <p class="desc text-lg">12:30 PM â€” 05:00 PM</p>
                </div>
            </div>
            
            <!-- Countdown Timer -->
            <div class="countdown reveal">
                <div class="hero connect-page min-h-70">
                    <div class="container flex-grow mx-auto relative w-auto z-50">
                        <div class="hero-body py-8 flex flex-col items-center justify-center">
                            <div class="campaign campaign-0 flex flex-col items-center justify-center w-full">
                                <div class="counter timer flex flex-col items-center justify-center my-12">
                                    <span class="title text-gray-500 text-base tracking-widest uppercase mb-2">Menghitung hari</span>
                                    <div class="counter-boxes flex flex-row">
                                        <div class="count-box bg-black bg-opacity-80 shadow-lg backdrop-blur rounded-lg flex flex-col items-center justify-center w-25 h-25 mr-1">
                                            <h1 class="value day text-white text-4xl leading-8 pt-2 m-0">0</h1>
                                            <span class="text-gray-500 text-xs font-medium tracking-widest uppercase">Hari</span>
                                        </div>
                                        <div class="count-box bg-black bg-opacity-80 shadow-lg backdrop-blur rounded-lg flex flex-col items-center justify-center w-25 h-25 mr-1">
                                            <h1 class="value hour text-white text-4xl leading-8 pt-2 m-0">0</h1>
                                            <span class="text-gray-500 text-xs font-medium tracking-widest uppercase">Jam</span>
                                        </div>
                                        <div class="count-box bg-black bg-opacity-80 shadow-lg backdrop-blur rounded-lg flex flex-col items-center justify-center w-25 h-25 mr-1">
                                            <h1 class="value minute text-white text-4xl leading-8 pt-2 m-0">0</h1>
                                            <span class="text-gray-500 text-xs font-medium tracking-widest uppercase">Minit</span>
                                        </div>
                                        <div class="count-box bg-black bg-opacity-80 shadow-lg backdrop-blur rounded-lg flex flex-col items-center justify-center w-25 h-25">
                                            <h1 class="value second text-white text-4xl leading-8 pt-2 m-0">0</h1>
                                            <span class="text-gray-500 text-xs font-medium tracking-widest uppercase">Saat</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Aturcara -->
            <div class="aturcara reveal flex flex-col gap-7.5 z-50 relative">
                <p class="title uppercase text-gray-900 text-lg tracking-wider">aturcara majlis</p>
                <div class="one flex flex-col gap-1.25">
                    <p>Kehadiran Tetamu</p>
                    <p class="text-gray-500">12:30 PM</p>
                </div>
                <div class="two flex flex-col gap-1.25">
                    <p>Ketibaan Pengantin</p>
                    <p class="text-gray-500">01:30 PM</p>
                </div>
                <div class="three flex flex-col gap-1.25">
                    <p>Makan Beradab</p>
                    <p class="text-gray-500">02:00 PM</p>
                </div>
                <div class="four flex flex-col gap-1.25">
                    <p>Majlis Bersurai</p>
                    <p class="text-gray-500">05:00 PM</p>
                </div>
            </div>
            
            <!-- Ucapan Section -->
            <div class="ucapan reveal">
                <div class="container relative max-w-[420px] flex flex-col items-center justify-center mt-7.5 z-50">
                    <img src="img/ucapan-bg.png" alt="" class="w-full h-auto">
                    <div class="content absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-center w-85/100">
                        <p class="text-base font-josefin m-0 text-center">Ya Allah, berkatilah majlis perkahwinan ini, limpahkan baraqah dan rahmat kepada kedua
                            mempelai ini.
                            Kurniakanlah mereka
                            zuriat yang soleh dan solehah. Kekalkanlah jodoh mereka di dunia dan di akhirat dan
                            sempurnakanlah
                            agama mereka dengan
                            berkat ikatan ini.</p>
                    </div>
                </div>
            </div>
            
            <!-- RSVP Section -->
            <div class="rsvp relative w-full flex flex-col items-center justify-center mt-7.5 mb-12 z-50">
                <h2 class="reveal uppercase text-gray-900 text-center mb-7.5">Ucapan</h2>
                <div class="container-message reveal w-95/100 h-[450px] overflow-y-auto py-0 px-4 border-t border-b border-wheat custom-scrollbar" id="messages-container">
                    <!-- Messages will be loaded here by JavaScript -->
                </div>
                <div class="beri-ucapan-button reveal w-full flex items-center justify-center mt-5 mb-12 gap-1.25">
                    <button id="kehadiran-btn" class="flex items-center justify-center py-4 w-45/100 rounded-lg border border-gray-500 bg-light cursor-pointer gap-2.5 hover:bg-light hover:opacity-80">
                        <i class='bx bxs-check-square text-base text-primary'></i>
                        <span class="text-sm uppercase">Sahkan Kehadiran</span>
                    </button>
                    <button id="ucapan-btn" class="flex items-center justify-center py-4 w-45/100 rounded-lg border border-gray-500 bg-light cursor-pointer gap-2.5 hover:bg-light hover:opacity-80">
                        <i class='bx bxs-pen text-base text-primary'></i>
                        <span class="text-sm uppercase">Berikan Ucapan</span>
                    </button>
                </div>
            </div>
        </section>
        
        <!-- Footer Menu -->
        <section class="footer w-full fixed bottom-0 left-0 z-60">
            <ul class="menu max-w-[420px] shadow-2xl bg-primary rounded-t-2xl h-16 py-0 px-4 mx-auto list-none flex items-center justify-around">
                <li id="calendar-btn" class="cursor-pointer"><i class='bx bx-calendar text-white text-2xl font-medium'></i></li>
                <li id="location-btn" class="cursor-pointer"><i class='bx bx-map text-white text-2xl font-medium'></i></li>
                <li id="music-btn" class="cursor-pointer"><i class='bx bx-music text-white text-2xl font-medium'></i></li>
                <li id="rsvp-btn" class="cursor-pointer"><i class='bx bx-envelope text-white text-2xl font-medium'></i></li>
                <li id="contact-btn" class="cursor-pointer"><i class='bx bx-phone text-white text-2xl font-medium'></i></li>
            </ul>
        </section>
    </div>

    <!-- Bottom Modal Menus -->
    <div id="calendar-menu" class="toggle-menu fixed bottom-[-100%] left-0 right-0 max-w-[400px] mx-auto bg-primary shadow-lg py-5 px-5 transition-bottom duration-400 z-60 rounded-lg">
        <div class="calendar flex flex-col items-center justify-center py-4">
            <h1 class="text-2xl font-medium mb-2.5 text-white uppercase">Calendar</h1>
            <p class="flex gap-2.5 mb-2.5">
                <span class="text-base font-josefin text-white">25 Disember 2025</span>
                <span class="text-base font-josefin text-white">|</span>
                <span class="text-base font-josefin text-white">05 Rejab 1447H</span>
            </p>
            <div class="button flex flex-col gap-2.5 mt-2.5">
                <button class="google flex items-center justify-center border-none rounded w-62 h-10 cursor-pointer bg-light hover:bg-light hover:opacity-90" onclick="addGoogleCalendar()">
                    <i class='bx bxl-google text-xl mr-1.25'></i>
                    <span class="text-base font-josefin">Tambah ke Kalendar</span>
                </button>
                <button class="apple flex items-center justify-center border-none rounded w-62 h-10 cursor-pointer bg-light hover:bg-light hover:opacity-90" onclick="addAppleCalendar()">
                    <i class='bx bxl-apple text-xl mr-1.25'></i>
                    <span class="text-base font-josefin">Tambah ke Kalendar</span>
                </button>
            </div>
        </div>
    </div>

    <div id="location-menu" class="toggle-menu fixed bottom-[-100%] left-0 right-0 max-w-[400px] mx-auto bg-primary shadow-lg py-5 px-5 transition-bottom duration-400 z-60 rounded-lg">
        <div class="location flex flex-col items-center justify-center py-4">
            <h1 class="text-2xl font-medium mb-2.5 text-white uppercase">Lokasi</h1>
            <p class="text-base font-josefin text-white">PINGGIRBALI Homestay & Campsite</p>
            <p class="text-base font-josefin text-white">Lot 3284 Jalan, Kuala Semerak, Tok Bali</p>
            <p class="text-base font-josefin text-white">16700 Pasir Puteh, Kelantan</p>
            <div class="button flex items-center justify-center mt-5 gap-2.5">
                <button class="google flex items-center justify-center border-none rounded w-45 h-9 cursor-pointer bg-light hover:bg-light hover:opacity-90" onclick="openGoogleMaps()">
                    <i class='bx bxl-google text-xl mr-1.25'></i>
                    <span class="text-base font-josefin">Google Maps</span>
                </button>
                <button class="waze flex items-center justify-center border-none rounded w-45 h-9 cursor-pointer bg-light hover:bg-light hover:opacity-90" onclick="openWaze()">
                    <i class="fa-brands fa-waze text-xl mr-1.25"></i>
                    <span class="text-base font-josefin">Waze</span>
                </button>
            </div>
        </div>
    </div>

    <div id="music-menu" class="toggle-menu fixed bottom-[-100%] left-0 right-0 max-w-[400px] mx-auto bg-primary shadow-lg py-5 px-1.5 transition-bottom duration-400 z-60 rounded-lg">
        <div class="music flex flex-col items-center justify-center py-5">
            <h1 class="text-2xl font-medium mb-2.5 text-white uppercase">Lagu</h1>
            <p class="text-base font-josefin text-wheat text-center">Canon in D x Cicak</p>
            <p class="text-base font-josefin text-wheat text-center">(Piano Cover by Nabilah Amin)</p>
            <audio id="audio-player" controls loop class="mt-5 w-full">
                <source type="audio/mp3" src="audio/canonindxcicakcikgunaim.mp3">
            </audio>
        </div>
    </div>

    <div id="rsvp-menu" class="toggle-menu fixed bottom-[-100%] left-0 right-0 max-w-[400px] mx-auto bg-primary shadow-lg py-5 px-5 transition-bottom duration-400 z-60 rounded-lg">
        <div class="rsvp flex flex-col items-center justify-center py-4">
            <h1 class="text-2xl font-medium mb-2.5 text-white uppercase">Kehadiran</h1>
            <div class="button flex items-center justify-around gap-2.5 w-full mt-2.5">
                <button type="button" id="btn-hadir" class="flex items-center justify-center w-60/100 py-2 px-1.5 border-none rounded gap-1.25 cursor-pointer bg-light hover:bg-light hover:opacity-90">
                    <i class='bx bx-check text-2xl text-green-600'></i>
                    <span class="text-base font-josefin">Hadir</span>
                </button>
                <button type="button" id="btn-tidak-hadir" class="flex items-center justify-center w-60/100 py-2 px-1.5 border-none rounded gap-1.25 cursor-pointer bg-light hover:bg-light hover:opacity-90">
                    <i class='bx bx-x text-2xl text-red-600'></i>
                    <span class="text-base font-josefin">Tidak Hadir</span>
                </button>
            </div>
        </div>
    </div>

    <div id="contact-menu" class="toggle-menu fixed bottom-[-100%] left-0 right-0 max-w-[400px] mx-auto bg-primary shadow-lg py-5 px-5 transition-bottom duration-400 z-60 rounded-lg">
        <div class="contact flex flex-col items-center justify-center py-4">
            <h1 class="text-2xl font-medium mb-2.5 text-white uppercase">Hubungi</h1>
            <div class="content w-full flex flex-col items-center justify-center gap-3.75 mt-1.25">
                <div class="person w-full flex items-center justify-between">
                    <div class="first-section flex gap-1.25 items-center justify-center">
                        <i class='bx bxs-user-circle text-3xl text-primary'></i>
                        <div class="name flex flex-col justify-center">
                            <span class="text-base font-josefin text-light font-medium">Nur Ernyza Zabidi</span>
                            <span class="italic text-xs text-gray-300">Pengantin Perempuan</span>
                        </div>
                    </div>
                    <div class="second-section flex gap-2.5">
                        <button class="cursor-pointer bg-transparent border-none flex items-center justify-center" onclick="makePhoneCall('+601116308427')"><i class='bx bx-phone text-3xl text-light'></i></button>
                        <button class="cursor-pointer bg-transparent border-none flex items-center justify-center" onclick="openWhatsApp('+601116308427')"><i class='bx bxl-whatsapp text-3xl text-light'></i></button>
                    </div>
                </div>
                <div class="person w-full flex items-center justify-between">
                    <div class="first-section flex gap-1.25 items-center justify-center">
                        <i class='bx bxs-user-circle text-3xl text-primary'></i>
                        <div class="name flex flex-col justify-center">
                            <span class="text-base font-josefin text-light font-medium">Irfan Rahim Zabidi</span>
                            <span class="italic text-xs text-gray-300">Abang Pengantin Perempuan</span>
                        </div>
                    </div>
                    <div class="second-section flex gap-2.5">
                        <button class="cursor-pointer bg-transparent border-none flex items-center justify-center" onclick="makePhoneCall('+601119400159')"><i class='bx bx-phone text-3xl text-light'></i></button>
                        <button class="cursor-pointer bg-transparent border-none flex items-center justify-center" onclick="openWhatsApp('+601119400159')"><i class='bx bxl-whatsapp text-3xl text-light'></i></button>
                    </div>
                </div>
                <div class="person w-full flex items-center justify-between">
                    <div class="first-section flex gap-1.25 items-center justify-center">
                        <i class='bx bxs-user-circle text-3xl text-primary'></i>
                        <div class="name flex flex-col justify-center">
                            <span class="text-base font-josefin text-light font-medium">Ilham Haziq Zabidi</span>
                            <span class="italic text-xs text-gray-300">Adik Pengantin Perempuan</span>
                        </div>
                    </div>
                    <div class="second-section flex gap-2.5">
                        <button class="cursor-pointer bg-transparent border-none flex items-center justify-center" onclick="makePhoneCall('+60146670082')"><i class='bx bx-phone text-3xl text-light'></i></button>
                        <button class="cursor-pointer bg-transparent border-none flex items-center justify-center" onclick="openWhatsApp('+60146670082')"><i class='bx bxl-whatsapp text-3xl text-light'></i></button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="ucapan-menu" class="toggle-menu fixed bottom-[-100%] left-0 right-0 max-w-[400px] mx-auto bg-primary shadow-lg py-5 px-5 transition-bottom duration-400 z-60 rounded-lg">
        <div class="ucapan-tetamu flex flex-col items-center justify-center py-4">
            <h1 class="text-2xl font-medium mb-2.5 text-white uppercase">Sampaikan Ucapan</h1>
            <form id="form-ucapan" class="form-ucapan flex flex-col gap-2.5 mt-5 w-full">
                <label for="name" class="text-center text-white text-base font-medium font-josefin">Nama Anda</label>
                <input type="text" id="name" name="name" placeholder="Uzumaki Naruto" required class="w-full py-3 px-4 rounded-xl text-white">
                
                <label for="ucapan" class="text-center text-white text-base font-medium font-josefin">Ucapan</label>
                <textarea name="message" id="ucapan" cols="30" rows="10" placeholder="Selamat pengantin baru..." required class="w-full resize-none py-3 px-4 text-white rounded-xl"></textarea>
                
                <div class="button w-full flex items-center justify-around gap-2.5 mt-5">
                    <button type="submit" class="hantar flex items-center justify-center w-50/100 border-none rounded py-2 px-1.5 cursor-pointer bg-light hover:bg-light hover:opacity-90 gap-1.25" id="hantar">
                        <i class='bx bxs-paper-plane text-2xl text-primary'></i>
                        <span class="text-base font-josefin">Hantar</span>
                    </button>
                    <button type="button" class="tutup flex items-center justify-center w-50/100 border-none rounded py-2 px-1.5 cursor-pointer bg-light hover:bg-light hover:opacity-90 gap-1.25">
                        <i class='bx bx-x text-2xl text-red-600'></i>
                        <span class="text-base font-josefin">Tutup</span>
                    </button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Success Message Container -->
    <div id="success-menu" class="toggle-menu fixed bottom-[-100%] left-0 right-0 max-w-[400px] mx-auto bg-primary shadow-lg py-5 px-5 transition-bottom duration-400 z-60 rounded-lg"></div>

    <script>
        // JSONBin.io Configuration
        const JSONBIN_BIN_ID = '68fe66f1ae596e708f2e6949'; // Replace with your actual bin ID
        const JSONBIN_API_KEY = '$2a$10$TOqdHF1fDoB400QtAS9ECex1yk5BRoBs3dcZ6Pj9R9QJ3UZNFpYqS'; // Replace with your actual API key
        const JSONBIN_URL = `https://api.jsonbin.io/v3/b/${JSONBIN_BIN_ID}`;

        // Default data structure
        const defaultWeddingData = {
            kehadiran: {
                hadir: 0,
                tidakHadir: 0
            },
            ucapan: []
        };

        let weddingData = { ...defaultWeddingData };

        // Show/hide loading
        function showLoading() {
            document.getElementById('loading').classList.remove('hidden');
        }

        function hideLoading() {
            document.getElementById('loading').classList.add('hidden');
        }

        // Load data from JSONBin.io
        async function loadData() {
			showLoading();
			try {
				const response = await fetch(JSONBIN_URL + '/latest', {
					method: 'GET',
					headers: {
						'X-Master-Key': JSONBIN_API_KEY,
						'Content-Type': 'application/json'
					}
				});

				if (response.ok) {
					const result = await response.json();
					
					// Validate and merge data instead of overwriting
					if (result.record && isValidWeddingData(result.record)) {
						weddingData = mergeWeddingData(defaultWeddingData, result.record);
					} else {
						console.warn('Invalid data structure, using default');
						weddingData = { ...defaultWeddingData };
						// Save the correct structure back
						await saveData();
					}
				} else {
					console.warn('Failed to load data from JSONBin, using default data');
					weddingData = { ...defaultWeddingData };
				}
			} catch (error) {
				console.error('Error loading data:', error);
				weddingData = { ...defaultWeddingData };
			}
			updateMessages();
			hideLoading();
		}

		// Data validation function
		function isValidWeddingData(data) {
			return data && 
				data.kehadiran && 
				typeof data.kehadiran.hadir === 'number' &&
				typeof data.kehadiran.tidakHadir === 'number' &&
				Array.isArray(data.ucapan);
		}

		// Safe data merging
		function mergeWeddingData(defaultData, loadedData) {
			return {
				kehadiran: {
					hadir: loadedData.kehadiran?.hadir || defaultData.kehadiran.hadir,
					tidakHadir: loadedData.kehadiran?.tidakHadir || defaultData.kehadiran.tidakHadir
				},
				ucapan: Array.isArray(loadedData.ucapan) ? loadedData.ucapan : defaultData.ucapan
			};
		}

        // Save data to JSONBin.io
        async function saveData() {
            showLoading();
            try {
                const response = await fetch(JSONBIN_URL, {
                    method: 'PUT',
                    headers: {
                        'X-Master-Key': JSONBIN_API_KEY,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(weddingData)
                });

                if (!response.ok) {
                    throw new Error('Failed to save data');
                }
                console.log('Data saved successfully');
            } catch (error) {
                console.error('Error saving data:', error);
                alert('Gagal menyimpan data. Sila cuba lagi.');
            }
            hideLoading();
        }

        // Update messages in the UI
        function updateMessages() {
            const container = document.getElementById('messages-container');
            container.innerHTML = '';
            
            if (weddingData.ucapan.length === 0) {
                container.innerHTML = `
                    <div class="content-empty flex items-center justify-center w-full h-full overflow-hidden">
                        <p class="empty-message text-center">Tiada ucapan lagi. Silalah beri ucapan kepada dua mempelai ini!</p>
                    </div>
                `;
            } else {
                weddingData.ucapan.forEach(message => {
                    const messageElement = document.createElement('div');
                    messageElement.className = 'content overflow-hidden w-full whitespace-normal text-ellipsis border-b border-gray-300';
                    messageElement.innerHTML = `
                        <p class="name text-primary mt-2.5">${message.name}</p>
                        <p class="message mt-2.5 mb-2.5">${message.message}</p>
                    `;
                    container.appendChild(messageElement);
                });
            }
        }

        // Wrapper Overlay
        document.getElementById("toggle-content").addEventListener("click", function () {
            var wrapper = document.getElementById("wrapper");
            var card = document.getElementById("card");

            // Add the 'hidden' class to start the fade out transition
            wrapper.classList.add("opacity-0");

            // Wait for the transition to complete
            wrapper.addEventListener("transitionend", function () {
                // After fade out is complete, hide the wrapper and show the card
                wrapper.classList.add("hidden");
                card.classList.remove("hidden");
            }, { once: true });

            // Play the audio
            const audioPlayer = document.getElementById("audio-player");
            audioPlayer.play();
        });

        // Timer Countdown
        function setupCountdown(campaignSelector, startTimeMillis, endTimeMillis) {
            var second = 1000;
            var minute = second * 60;
            var hour = minute * 60;
            var day = hour * 24;

            function calculateRemaining() {
                var now = new Date().getTime();
                return now >= startTimeMillis && now < endTimeMillis ? endTimeMillis - now : 0;
            }

            var didRefresh = false;
            var previousGap = calculateRemaining();

            function countdown() {
                var gap = calculateRemaining();
                var shouldRefresh = previousGap > day && gap <= day || previousGap > 0 && gap === 0;

                previousGap = gap;

                var textDay = Math.floor(gap / day);
                var textHour = Math.floor((gap % day) / hour);
                var textMinute = Math.floor((gap % hour) / minute);
                var textSecond = Math.floor((gap % minute) / second);

                if (document.querySelector(campaignSelector + ' .timer')) {
                    document.querySelector(campaignSelector + ' .day').innerText = textDay;
                    document.querySelector(campaignSelector + ' .hour').innerText = textHour;
                    document.querySelector(campaignSelector + ' .minute').innerText = textMinute;
                    document.querySelector(campaignSelector + ' .second').innerText = textSecond;
                }

                if (shouldRefresh && !didRefresh) {
                    didRefresh = true;
                    setTimeout(function () {
                        window.location.reload();
                    }, 30000 + Math.random() * 90000);
                }
            }

            countdown();
            setInterval(countdown, 1000);
        }

        // Add to Calendar
        const event = {
            title: "Jemputan Kahwin Erny & Zai",
            startDate: "20251225T000000Z",
            endDate: "20251225T235959Z",
            location: "Lot 3284 Jalan, Kuala Semerak, Tok Bali, 16700 Pasir Puteh, Kelantan",
            description: "Kami menjemput tuan/puan hadir ke majlis perkahwinan anakanda kami.",
        };

        function generateGoogleCalendarLink(event) {
            const { title, startDate, endDate, location, description } = event;

            const baseUrl = "https://calendar.google.com/calendar/render?action=TEMPLATE";
            const params = new URLSearchParams({
                text: title,
                dates: `${startDate}/${endDate}`,
                details: description,
                location: location,
            });

            return `${baseUrl}&${params.toString()}`;
        }

        function generateICS(event) {
            const { title, startDate, endDate, location, description } = event;

            return `
                BEGIN:VCALENDAR
                VERSION:2.0
                BEGIN:VEVENT
                SUMMARY:${title}
                DTSTART:${startDate}
                DTEND:${endDate}
                LOCATION:${location}
                DESCRIPTION:${description}
                END:VEVENT
                END:VCALENDAR
            `.trim();
        }

        function downloadICS(filename, content) {
            const blob = new Blob([content], { type: "text/calendar" });
            const link = document.createElement("a");
            link.href = URL.createObjectURL(blob);
            link.download = filename;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        function addGoogleCalendar() {
            const googleLink = generateGoogleCalendarLink(event);
            window.open(googleLink, "_blank");
        }

        function addAppleCalendar() {
            const icsContent = generateICS(event);
            downloadICS("event.ics", icsContent);
        }

        // Location for Google and Waze
        function openGoogleMaps() {
            const latitude = 5.87975933172112;
            const longitude = 102.48561006056134;
            const googleMapsUrl = `https://www.google.com/maps/dir/?api=1&destination=${latitude},${longitude}&travelmode=driving`;

            window.open(googleMapsUrl, "_blank");
        }

        function openWaze() {
            const latitude = 5.87975933172112;
            const longitude = 102.48561006056134;
            const wazeUrl = `waze://?ll=${latitude},${longitude}&navigate=yes`;

            window.open(wazeUrl, "_blank");
        }

        // Contact
        function openWhatsApp(phoneNumber) {
            const message = "Kad Jemputan Kahwin. Hello, maaf mengganggu. Saya ingin bertanyakan sesuatu berkenaan majlis perkahwinan ini.";
            const whatsappUrl = `https://wa.me/${phoneNumber}?text=${encodeURIComponent(message)}`;
            window.open(whatsappUrl, "_blank");
        }

        function makePhoneCall(phoneNumber) {
            const callUrl = `tel:${phoneNumber}`;
            window.location.href = callUrl;
        }

        // Animation
        function reveal() {
            var reveals = document.querySelectorAll(".reveal");

            for (var i = 0; i < reveals.length; i++) {
                var windowHeight = window.innerHeight;
                var elementTop = reveals[i].getBoundingClientRect().top;
                var elementVisible = 10;

                if (elementTop < windowHeight - elementVisible) {
                    reveals[i].classList.add("active");
                } else {
                    reveals[i].classList.remove("active");
                }
            }
        }

        window.addEventListener("scroll", reveal);

        // Background Animation
        const petalContainer = document.querySelector('.petal-container');

        const maxPetals = 70;
        const petalInterval = 100;

        function createPetal() {
            if (petalContainer.childElementCount < maxPetals) {
                const petal = document.createElement('div');
                petal.className = 'petal absolute left-[-10px] bg-primary rounded-full opacity-50 animate-fall';

                const startY = Math.random() * 100;
                const duration = 4 + Math.random() * 2;

                const petalSize = 5 + Math.random() * 10;
                const petalOpacity = 0.3 + Math.random() * 0.5;

                petal.style.top = `${startY}%`;
                petal.style.width = `${petalSize}px`;
                petal.style.height = `${petalSize}px`;
                petal.style.opacity = petalOpacity;
                petal.style.animationDuration = `${duration}s`;

                const translateX = 300 + Math.random() * 120;
                const translateY = 300 + Math.random() * 120;

                petal.style.setProperty('--translate-x', `${translateX}px`);
                petal.style.setProperty('--translate-y', `${translateY}px`);

                petalContainer.appendChild(petal);

                setTimeout(() => {
                    petalContainer.removeChild(petal);
                }, duration * 1000);
            }
        }

        setInterval(createPetal, petalInterval);

        // Toggle Menu
        const toggleButtons = {
            'calendar-btn': 'calendar-menu',
            'location-btn': 'location-menu',
            'music-btn': 'music-menu',
            'rsvp-btn': 'rsvp-menu',
            'ucapan-btn': 'ucapan-menu',
            'contact-btn': 'contact-menu',
            'kehadiran-btn': 'rsvp-menu'
        };

        function toggleMenu(menuId, event) {
            event.stopPropagation();
            const menu = document.getElementById(menuId);

            if (menu.classList.contains('open')) {
                menu.classList.remove('open');
                menu.classList.add('bottom-[-100%]');
            } else {
                closeAllMenus();
                menu.classList.add('open');
                menu.classList.remove('bottom-[-100%]');
                menu.classList.add('bottom-[10%]');
            }
        }

        function closeAllMenus() {
            for (const menuId of Object.values(toggleButtons)) {
                const menu = document.getElementById(menuId);
                if (menu.classList.contains('open')) {
                    menu.classList.remove('open');
                    menu.classList.add('bottom-[-100%]');
                    menu.classList.remove('bottom-[10%]');
                }
            }
        }

        for (const [buttonId, menuId] of Object.entries(toggleButtons)) {
            const button = document.getElementById(buttonId);
            button.addEventListener('click', (event) => toggleMenu(menuId, event));
        }

        document.addEventListener('click', () => closeAllMenus());

        for (const menuId of Object.values(toggleButtons)) {
            const menu = document.getElementById(menuId);
            menu.addEventListener('click', (event) => event.stopPropagation());
        }

        function closeMenu(menuId) {
            const menu = document.getElementById(menuId);
            if (menu.classList.contains('open')) {
                menu.classList.remove('open');
                menu.classList.add('bottom-[-100%]');
                menu.classList.remove('bottom-[10%]');
            }
        }

        const closeButton = document.querySelector('#ucapan-menu .tutup');
        if (closeButton) {
            closeButton.addEventListener('click', (event) => {
                event.stopPropagation();
                closeMenu('ucapan-menu');
            });
        }

        // Handle Form
        document.getElementById("form-ucapan").addEventListener("submit", async function (event) {
            event.preventDefault();

            const name = document.getElementById('name').value;
            const message = document.getElementById('ucapan').value;

            if (name && message) {
                // Add message to data
                weddingData.ucapan.push({
                    name: name,
                    message: message,
                    timestamp: new Date().toISOString()
                });

                // Save data
                await saveData();

                // Update UI
                updateMessages();

                // Display success message
                const successMenu = document.getElementById("success-menu");
                successMenu.innerHTML = "<div class='success-message flex flex-row items-center justify-start py-4 px-4 pb-5 gap-2.5'><i class='bx bx-check text-6xl text-green-400'></i><p class='text-base font-josefin text-white'>Mesej anda berjaya dihantar!</p></div>";
                successMenu.classList.add("open");
                successMenu.classList.remove('bottom-[-100%]');
                successMenu.classList.add('bottom-[10%]');

                // Add timer
                setTimeout(function() {
                    successMenu.classList.remove("open");
                    successMenu.classList.add('bottom-[-100%]');
                    successMenu.classList.remove('bottom-[10%]');
                }, 3000);

                // Close the ucapan menu
                closeMenu('ucapan-menu');

                // Reset form
                document.getElementById("form-ucapan").reset();
            }
        });

        // Handle Kehadiran Count
        async function incrementCount(type, successMessage, iconClass, closeMenuId) {
            if (type === 'hadir') {
                weddingData.kehadiran.hadir++;
            } else if (type === 'tidakHadir') {
                weddingData.kehadiran.tidakHadir++;
            }

            // Save data
            await saveData();

            // Display the success message
            const successMenu = document.getElementById("success-menu");
            successMenu.innerHTML = `<div class='success-message flex flex-row items-center justify-start py-4 px-4 pb-5 gap-2.5'><i class='${iconClass}'></i><p class='text-base font-josefin text-white'>${successMessage}</p></div>`;
            successMenu.classList.add("open");
            successMenu.classList.remove('bottom-[-100%]');
            successMenu.classList.add('bottom-[10%]');

            // Add timer
            setTimeout(function() {
                successMenu.classList.remove("open");
                successMenu.classList.add('bottom-[-100%]');
                successMenu.classList.remove('bottom-[10%]');
            }, 3000);

            // Close the menu
            if (closeMenuId) {
                closeMenu(closeMenuId);
            }
        }

        document.getElementById("btn-hadir").onclick = function() {
            incrementCount('hadir', "Kami menantikan kedatangan anda!", 'bx bxs-wink-smile text-6xl text-green-400', 'rsvp-menu');
        };

        document.getElementById("btn-tidak-hadir").onclick = function() {
            incrementCount('tidakHadir', "Maaf, mungkin lain kali.", 'bx bxs-sad text-6xl text-gray-400', 'rsvp-menu');
        };

        // Initialize
        document.addEventListener("DOMContentLoaded", async function() {
            await loadData();
            setupCountdown(".campaign-0", new Date().getTime(), new Date('2025-12-25').getTime());
        });
    </script>
</body>
</html>